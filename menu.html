<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê¸°ëŠ¥ ì„ íƒ | ì „ë‚¨ê²½ì°° ì™¸êµ­ì¸ ì§€ì› ì„œë¹„ìŠ¤</title>
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      color: #222;
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 480px;
      min-height: 100vh;
      background: #ffffff;
      display: flex;
      flex-direction: column;
    }

    /* í—¤ë” */
    header {
      background: #003366;
      color: #ffffff;
      padding: 10px 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .back-btn {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: none;
      background: rgba(0,0,0,0.3);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      flex-shrink: 0;
    }

    .back-btn:hover {
      background: rgba(0,0,0,0.45);
    }

    .back-icon {
      font-size: 26px;
      font-weight: 900;
      color: #ffeb3b;
      line-height: 1;
      text-shadow: 0 0 4px rgba(0,0,0,0.8);
    }

    .title-box {
      display: flex;
      flex-direction: column;
      min-width: 0;
    }

    .title-main {
      font-size: 0.9rem;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .title-sub {
      font-size: 0.78rem;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    main {
      flex: 1;
      padding: 12px 14px 16px;
      background: #f5f5f5;
    }

    .lang-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: #e6eefc;
      color: #003366;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .lang-chip img {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      object-fit: cover;
      background: #fff;
    }

    .menu-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .menu-card {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 12px;
      background: #ffffff;
      text-decoration: none;
      color: inherit;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
      border: 1px solid #eef1f6;
      transition: transform .05s ease, box-shadow .15s ease, border-color .15s ease;
    }

    .menu-card:hover {
      box-shadow: 0 2px 6px rgba(0,0,0,0.10);
      border-color: #dfe7f5;
    }

    .menu-card:active {
      transform: scale(0.985);
    }

    .menu-card-main {
      display: flex;
      flex-direction: column;
      gap: 3px;
      flex: 1;
      min-width: 0;
    }

    .menu-card-title {
      font-size: 0.9rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .menu-card-icon {
      font-size: 1.1rem;
    }

    .menu-card-desc {
      font-size: 0.78rem;
      color: #555;
      line-height: 1.3;
    }

    .menu-card-arrow {
      font-size: 1.1rem;
      color: #bbb;
      font-weight: 800;
    }

    footer {
      text-align: center;
      font-size: 0.7rem;
      color: #888;
      padding: 8px 10px 12px;
      background: #f5f5f5;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <button class="back-btn" onclick="history.back()">
        <span class="back-icon">â†</span>
      </button>
      <div class="title-box">
        <div class="title-main" id="titleMain">ê¸°ëŠ¥ì„ ì„ íƒí•˜ì„¸ìš”</div>
        <div class="title-sub" id="titleSub">ì„ íƒí•œ ì–¸ì–´ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ì„¸ìš”.</div>
      </div>
    </header>

    <main>
      <!-- í˜„ì¬ ì„ íƒëœ ì–¸ì–´ í‘œì‹œ -->
      <div class="lang-chip" id="langChip">
        <!-- JSì—ì„œ ì±„ì›€ -->
      </div>

      <!-- ê¸°ëŠ¥ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ -->
      <div class="menu-list" id="menuList">
        <!-- JSì—ì„œ ì¹´ë“œ ìƒì„± -->
      </div>
    </main>

    <footer>
      ê¸´ê¸‰ ìƒí™©ì—ì„œëŠ” ì¦‰ì‹œ 112(ë²”ì£„Â·ê¸´ê¸‰ ì‹ ê³ )ë¥¼ ì´ìš©í•´ ì£¼ì„¸ìš”.
    </footer>
  </div>

  <!-- ì–¸ì–´ ì„¤ì • JS -->
  <script src="lang-config.js"></script>
  <script>
    const langCode = getSelectedLangCode();
    const cfg = LANG_CONFIG[langCode];
    const menuList = document.getElementById("menuList");

    // í—¤ë” í…ìŠ¤íŠ¸
    document.getElementById("titleMain").textContent = cfg.headerTitle || "ê¸°ëŠ¥ì„ ì„ íƒí•˜ì„¸ìš”";
    document.getElementById("titleSub").textContent  = cfg.headerSub  || "";

    // ìƒë‹¨ ì–¸ì–´ ì¹©
    const chip = document.getElementById("langChip");
    const flagImg = cfg.img ? `<img src="${cfg.img}" alt="${cfg.name}">` : "";
    chip.innerHTML = `${flagImg}<span>${cfg.name}</span>`;

    // ìœ í˜•ë³„ ì•„ì´ì½˜ ì§€ì •
    const ICON_MAP = {
      help: "ğŸ‘®",       // ê²½ì°° ì‹ ê³ Â·ìƒë‹´ ì§€ì›
      guide: "ğŸ“˜",      // ë²”ì£„ì˜ˆë°© ê°€ì´ë“œ
      traffic: "ğŸš¦",    // ì•ˆì „í•œ êµí†µìƒí™œ
      drug: "ğŸ’Š",       // ì™¸êµ­ì¸ ë§ˆì•½ ì˜ˆë°© ê°€ì´ë“œ
      safety: "âš ï¸",     // ì•ˆì „ ìˆ˜ì¹™
      rights: "ğŸ›¡ï¸",    // ê¶Œìµë³´í˜¸ ì•ˆë‚´ë¬¸
      law: "ğŸ“š",        // ìƒí™œë²•ë ¹ì •ë³´
      google: "ğŸŒ",     // êµ¬ê¸€ ë²ˆì—­
      default: "â–¶ï¸",
    };

    // âœ… ì¹´ì¹´ì˜¤ ì¸ì•± ë¸Œë¼ìš°ì € & ì‚¼ì„± ì¸í„°ë„·ì—ì„œ PDFì¼ ë•Œ Google Docs viewerë¡œ ìš°íšŒ
    function wrapPdfForSpecialBrowsers(url) {
      if (!url) return url;
      const lowerUrl = url.toLowerCase();
      const isPdf = lowerUrl.endsWith(".pdf");
      if (!isPdf) return url;

      const ua = navigator.userAgent.toLowerCase();
      const isKakaoInApp   = ua.includes("kakaotalk");
      const isSamsungInternet = ua.includes("samsungbrowser");

      // ì¹´ì¹´ì˜¤ ì¸ì•± or ì‚¼ì„± ì¸í„°ë„· + http(s) PDF ì´ë©´ Google Docs ë·°ì–´ ì‚¬ìš©
      if ((isKakaoInApp || isSamsungInternet) &&
          (lowerUrl.startsWith("http://") || lowerUrl.startsWith("https://"))) {
        const encoded = encodeURIComponent(url);
        return `https://docs.google.com/gview?embedded=1&url=${encoded}`;
      }

      return url;
    }

    function addCard(type, label, desc, url) {
      if (!label || !url) return;

      const a = document.createElement("a");
      a.className = "menu-card";

      // ğŸ”¹ ì‹¤ì œë¡œ ì‚¬ìš©í•  URL (íŠ¹ì • ë¸Œë¼ìš°ì € + PDFë©´ viewerë¡œ ë³€ê²½)
      const finalUrl = wrapPdfForSpecialBrowsers(url);
      a.href = finalUrl;

      // ì™¸ë¶€ ë§í¬ëŠ” ìƒˆ íƒ­ì—ì„œ ì—´ë¦¬ê²Œ
      if (finalUrl.startsWith("http")) {
        a.target = "_blank";
        a.rel = "noopener noreferrer";
      }

      const icon = ICON_MAP[type] || ICON_MAP.default;

      a.innerHTML = `
        <div class="menu-card-main">
          <div class="menu-card-title">
            <span class="menu-card-icon">${icon}</span>
            <span>${label}</span>
          </div>
          <div class="menu-card-desc">${desc || ""}</div>
        </div>
        <div class="menu-card-arrow">â€º</div>
      `;

      menuList.appendChild(a);
    }

    // ì¹´ë“œ ìƒì„± ìˆœì„œ
    addCard("help",   cfg.helpLabel,    cfg.helpDesc,    cfg.helpUrl);
    addCard("guide",  cfg.guideLabel,   cfg.guideDesc,   cfg.guideUrl);
    if (cfg.trafficLabel) addCard("traffic", cfg.trafficLabel, cfg.trafficDesc, cfg.trafficUrl);
    if (cfg.drugLabel)    addCard("drug",    cfg.drugLabel,    cfg.drugDesc,    cfg.drugUrl);
    if (cfg.safetyLabel)  addCard("safety",  cfg.safetyLabel,  cfg.safetyDesc,  cfg.safetyUrl);
    if (cfg.rightsLabel)  addCard("rights",  cfg.rightsLabel,  cfg.rightsDesc,  cfg.rightsUrl);
    if (cfg.lawLabel)     addCard("law",     cfg.lawLabel,     cfg.lawDesc,     cfg.lawUrl);
    addCard("google", cfg.googleLabel, cfg.googleDesc, cfg.googleUrl);
  </script>
</body>
</html>
